{"version":3,"sources":["reducer/types.ts","reducerContext.ts","reducer/index.js","utils.ts","reducer/actions.ts","lib/doOcr.ts","components/PageView/ToolBar.tsx","components/PageView/ImageView.tsx","components/Loading animation/Spin.svg","components/PageView/HocrView.tsx","components/PageView/PageView.tsx","components/BooksCatalog.tsx","components/SearchPage.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["ActionType","createReducerContext","state","action","type","ChangeCurPage","produce","draft","curPageno","payload","LogInfo","logInfo","LoadImage","pageImage","LoadHocr","hocrPage","SetHoverId","hoverId","model","useAppReducer","AppReducerProvider","loadImageUtil","blob","createImageBitmap","img","curWidth","width","curHeight","height","urlObject","URL","createObjectURL","orgWidth","orgHeight","changeCurPage","createAction","loadImage","loadHocr","doOcr","hocrurl","fetch","then","r","text","console","log","DOMParser","parseFromString","error","ToolBar","dispatch","fnSetCurZoom","parsed","queryString","parse","window","location","search","imageurl","process","REACT_APP_SERVER_URL","b","handleChange","e","includes","page","useEffect","className","title","xmlns","fill","viewBox","d","onClick","parseInt","value","onChange","fillRule","ImageView","image","oldProps","this","props","removeEventListener","handleLoad","Image","src","ref","node","imageNode","React","Component","HocrView","setEditorValue","editorValue","useState","isPageLoaded","setIsPageLoaded","mySchema","Schema","nodes","addListNodes","schema","spec","marks","view","EditorView","document","querySelector","EditorState","create","doc","fromSchema","plugins","exampleSetup","innerText","split","id","onKeyUp","event","target","Loader","alt","PageViewer","curZoom","setCurZoom","setBookDetails","imageLoading","setImageLoading","useMeasure","imgMeasureRef","p","axios","get","response","data","style","backgroundColor","paddingRight","to","postEditedTextURL","post","catch","zoomDelta","BooksCatalog","show","setShow","showAlert","setShowAlert","inputValues","setInputValues","onlineBookList","setOnlineBookList","alertMessage","setAlertMessage","form","useRef","handleClose","refreshBookList","listBookUrl","er","msg","variant","trItem","map","bookItem","index","author","category","repo_name","handleInputChange","checked","name","shallow","Object","assign","Modal","onHide","animation","Header","Title","Body","Form","onSubmit","preventDefault","frmData","FormData","current","addBookUrl","headers","Group","Label","Control","placeholder","as","File","Button","Alert","onClose","dismissible","Footer","scope","color","colSpan","SearchPage","setSearchQuery","searchResults","setSearchResults","searchResultsDiv","docs","bookuuid","pageno","rel","dangerouslySetInnerHTML","__html","pagecontent","refreshSearchResults","qvalue","queryURL","onKeyDown","key","numFound","responseHeader","QTime","App","href","length","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.941d3951.chunk.js","sourcesContent":["import PageImageInfo from \"../types\";\nimport HocrPage from \"../types\";\nimport * as actions from \"./actions\";\n\nexport interface State {\n\tpageImage: PageImageInfo;\n\tmodel: string;\n\thocrPage: HocrPage;\n\thoverId: string;\n\tcurZoom: int;\n\tlogInfo: string;\n\tcurPageno: int;\n}\n\nexport enum ActionType {\n\tLoadImage = \"LoadImage\",\n\tLoadHocr = \"LoadHocr\",\n\tSetHoverId = \"SetHoverId\",\n\tLogInfo = \"LogInfo\",\n\tChangeCurPage = \"ChangeCurPage\",\n}\n\nexport interface ChangeCurPagePayload {\n\tcurPageno: int;\n}\n\nexport interface LogInfoPayload {\n\tlogInfo: string;\n}\n\nexport interface SetHoverIdPayload {\n\thoverId: string;\n}\n\nexport interface LoadImagePayload {\n\tpageImage: PageImageInfo;\n}\n\nexport interface LoadHocrPayload {\n\thocrPage: HocrPage;\n}\n\ntype Actions = typeof actions;\n\nexport type AppReducerAction = ReturnType<Actions[keyof Actions]>;\n","import { createReducerContext } from 'react-use';\n\nimport { reducer, initialState } from './reducer';\n\n\n\nexport const [useAppReducer, AppReducerProvider, AppReducerContext] = createReducerContext(reducer, initialState);\n","import { ActionType, AppReducerAction, State } from \"./types\";\nimport { produce } from \"immer\";\nimport type { Draft } from \"immer/dist/types/types-external\";\n\nexport const initialState: State = {\n\tpageImage: null,\n\tmodel: \"\",\n\thocrPage: null,\n\tlogInfo: \"\",\n\tcurPageno: 1,\n};\n\nexport function reducer(state: State, action: AppReducerAction): State {\n\tswitch (action.type) {\n\t\tcase ActionType.ChangeCurPage: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.curPageno = action.payload.curPageno;\n\t\t\t});\n\t\t}\n\t\tcase ActionType.LogInfo: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.logInfo = action.payload.logInfo;\n\t\t\t});\n\t\t}\n\n\t\tcase ActionType.LoadImage: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.pageImage = action.payload.pageImage;\n\t\t\t});\n\t\t}\n\t\tcase ActionType.LoadHocr: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.hocrPage = action.payload.hocrPage;\n\t\t\t});\n\t\t}\n\t\tcase ActionType.SetHoverId: {\n\t\t\treturn produce(state, (draft) => {\n\t\t\t\tdraft.hoverId = action.payload.hoverId;\n\t\t\t});\n\t\t}\n\t}\n}\n","import { PageImage } from \"./types\";\n\nexport async function loadImageUtil(blob: Blob): Promise<PageImage | null> {\n\tconst img = await createImageBitmap(blob);\n\n\treturn {\n\t\tcurWidth: img.width,\n\t\tcurHeight: img.height,\n\t\turlObject: URL.createObjectURL(blob),\n\t\torgWidth: img.width,\n\t\torgHeight: img.height,\n\t};\n}\n","import {ActionType, LoadImagePayload, LoadHocrPayload} from \"./types\";\nimport { createAction } from \"@reduxjs/toolkit\";\nimport {PageImageInfo, HocrPage} from \"../types\";\n\nexport const changeCurPage= createAction<(curPageno: int) =>{payload: ChangeCurPagePayLoad},\n\tAction.Type.ChangeCurPage\n>(ActionType.ChangeCurPage, (curPageno) =>({\n\tpayload: {\n\t\tcurPageno,\n\t},\n}));\n\nexport const logInfo= createAction<(logInfo: string) =>{payload: LogInfoPayload},\n\tAction.Type.SetLogInfo\n>(ActionType.LogInfo, (logInfo) => ({\n\tpayload: {\n\t\tlogInfo,\n\t},\n}));\n\nexport const setHoverId = createAction<\n\t(hoverId: string) => {payload: SetHoverIdPayload},\n\tActionType.SetHoverId\n>(ActionType.SetHoverId, (hoverId) => ({\n\tpayload: {\n\t\thoverId,\n\t},\n}));\n\nexport const loadImage = createAction<\n\t(pageImage: PageImageInfo) => { payload: LoadImagePayload },\n\tActionType.LoadImage\n>(ActionType.LoadImage, (pageImage) => ({\n\tpayload: {\n\t\tpageImage,\n\t},\n}));\n\nexport const loadHocr = createAction<\n\t(hocrPage: HocrPage) => { payload: LoadHocrPayload },\n\tActionType.LoadHocr\n>(ActionType.LoadHocr, (hocrPage) => ({\n\tpayload: { hocrPage },\n}));\n","import OcrTextDocument from \"../reducer/types\";\nimport raw from \"../data/out.hocr\";\nimport { Page, Word, Line } from \"../type\";\nimport assert from \"assert\";\n\n/* Asyncronous funtion to fetch hocr from OCR- Server service and if all good parse them into custom ocrLines for this project.\n * OcrText state gets updated at the end of this function call\n * */\n\nfunction assertClassName(className: string, expected: string | string[]) {\n  if (Array.isArray(expected)) {\n    assert(\n      expected.some((val) => val === className),\n      \"Expected element to have class name of one of: %s, received %s.\",\n      JSON.stringify(expected),\n      className\n    );\n\n    return;\n  }\n\n  assert(\n    expected === className,\n    \"Expected element to have class name of %s, received %s.\",\n    expected,\n    className\n  );\n}\n\nfunction parseAttrBbox(title: string): Bbox {\n  const matches = title.match(/bbox ([0-9]+) ([0-9]+) ([0-9]+) ([0-9]+)/);\n\n  if (!matches) {\n    throw new Error(\"No bbox attribute found in title.\");\n  }\n\n  return {\n    x0: +matches[1],\n    y0: +matches[2],\n    x1: +matches[3],\n    y1: +matches[4],\n  };\n}\n\nfunction parseNumberAttribute(title: string, name: string): number | null {\n  const matches = title.match(new RegExp(`${name} (-?[0-9]+(?:\\\\.[0-9]+)?)`));\n\n  if (!matches) {\n    return null;\n  }\n\n  return parseFloat(matches[1]);\n}\n\nconst parseAttrWordSize = (title: string): number | null =>\n  parseNumberAttribute(title, \"x_fsize\");\n\nconst parseAttrConfidence = (title: string): number | null =>\n  parseNumberAttribute(title, \"x_wconf\");\n\nconst parseAttrLineSize = (title: string): number | null =>\n  parseNumberAttribute(title, \"x_size\");\n\nfunction parseWord(element: Element): Word {\n  assertClassName(element.className, \"ocrx_word\");\n\n  const title = element.getAttribute(\"title\") ?? \"\";\n\n  return {\n    type: \"word\",\n    id: element.getAttribute(\"id\") ?? \"\",\n    bbox: parseAttrBbox(title),\n    size: parseAttrWordSize(title),\n    confidence: parseAttrConfidence(title),\n    language: element.getAttribute(\"lang\") ?? \"\",\n    text: element.textContent ?? \"\",\n  };\n}\n\nfunction parseLine(element: Element): Line {\n  assertClassName(element.className, [\n    \"ocr_line\",\n    \"ocr_caption\",\n    \"ocr_textfloat\",\n  ]);\n\n  const title = element.getAttribute(\"title\") ?? \"\";\n\n  let type: \"line\" | \"caption\" | \"textfloat\" = \"line\";\n\n  if (element.className === \"ocr_caption\") {\n    type = \"caption\";\n  }\n\n  if (element.className === \"ocr_textfloat\") {\n    type = \"textfloat\";\n  }\n\n  return {\n    type,\n    id: element.getAttribute(\"id\") ?? \"\",\n    bbox: parseAttrBbox(title),\n    size: parseAttrLineSize(title),\n    children: Array.from(element.children).map(parseWord),\n  };\n}\n\nfunction parsePage(doc: Document): Page {\n  const p = doc.querySelector(\".ocr_page\");\n\n  if (!p) {\n    throw new Error('Could not find an element with class \"ocr_page\".');\n  }\n\n  const title = p.getAttribute(\"title\") ?? \"\";\n\n  const lineel = doc.querySelectorAll(\".ocr_line\");\n\n  if (!lineel) {\n    throw new Error('Could not find an element with class \"ocr_line\".');\n  }\n\n  return {\n    type: \"page\",\n    id: p.getAttribute(\"id\") ?? \"\",\n    title: doc.title,\n    bbox: parseAttrBbox(title),\n    children: Array.from(lineel).map(parseLine),\n  };\n}\n\nexport default function doOcr(hocrurl): Promise<Page> {\n  //first call the server with image POST and get a hocr text in return( or an error?)\n  //\n\n  return fetch(hocrurl)\n    .then((r) => r.text())\n    .then(\n      (text) => {\n        console.log(\"Enter2\");\n        const doc = new DOMParser().parseFromString(text, \"text/html\");\n\n        // return parsePage(doc);\n        return doc;\n\t\t// return text\n      },\n      (error) => {\n        console.log(error);\n      }\n    );\n}\n","import React, { Dispatch, useEffect } from \"react\";\nimport queryString from \"query-string\";\nimport { loadImageUtil } from \"../../utils\";\nimport {\n  loadImage,\n  loadHocr,\n  logInfo,\n  changeCurPage,\n} from \"../../reducer/actions\";\nimport doOcr from \"../../lib/doOcr\";\n/* import { FaArrowAltCircleLeft } from 'react-icons/fa'; */\nexport interface Props {\n  curPageNo: int;\n  fnSetCurZoom;\n  dispatch: Dispatch<AppReducerAction>;\n}\n\nfunction ToolBar({ curPageno, dispatch, fnSetCurZoom }: Props) {\n\n  const parsed = queryString.parse(window.location.search);\n  const imageurl =\n    process.env.REACT_APP_SERVER_URL + \"/i/b/\" + parsed?.b + \"/p/\" + curPageno;\n\n  const hocrurl =\n    process.env.REACT_APP_SERVER_URL + \"/h/b/\" + parsed?.b + \"/p/\" + curPageno;\n\n  const handleChange = (e) => {\n    console.log(\"handling page change +\" + imageurl);\n    fetch(imageurl)\n      .then((r) => r.blob())\n      .then(async (blob) => {\n        if (!blob.type.includes(\"image\")) return;\n\n        const pageImage = await loadImageUtil(blob);\n\n        if (!pageImage) {\n          return;\n        }\n\n        //defaulting to 100% of div\n\n        pageImage.curWidth = 0;\n        pageImage.curHeight = 0;\n        dispatch(loadImage(pageImage));\n\n        const page: HocrPage = await doOcr(hocrurl);\n        // const page = await doOcr(hocrurl);\n\n        dispatch(loadHocr(page));\n      });\n  };\n\n  useEffect(() => {\n    handleChange();\n  }, [curPageno]);\n\n  return (\n    <div className=\"container-fluid pv-toolbar border\">\n      <div className=\"row align-items-left shadow\">\n        <div className=\"col pl-3\">\n          <span className=\"pe-md-5\">\n            <button\n              type=\"button\"\n              className=\"btn btn-light toolbar-btn\"\n              title=\"Toggle Side-pane Window\"\n            >\n              {/* <FaArrowAltCircleLeft /> */}\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"16\"\n                height=\"16\"\n                fill=\"currentColor\"\n                className=\"bi bi-layout-sidebar\"\n                viewBox=\"0 0 16 16\"\n              >\n                <path d=\"M0 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3zm5-1v12h9a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H5zM4 2H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h2V2z\" />\n              </svg>\n            </button>\n          </span>\n\n          <button\n            type=\"button\"\n            className=\"btn btn-light toolbar-btn px-2\"\n            title=\"Previous Page\"\n            onClick={(e) => {\n              if (curPageno - 1 > 0) {\n                dispatch(changeCurPage(parseInt(curPageno) - 1));\n              }\n            }}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              fill=\"currentColor\"\n              className=\"bi bi-arrow-left-circle-fill\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path d=\"M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z\" />\n            </svg>{\" \"}\n          </button>\n\n          <span className=\"border-start border-2 h-100 rounded-pill\"></span>\n\n          <button\n            type=\"button\"\n            className=\"btn btn-light toolbar-btn px-2\"\n            title=\"Next Page\"\n            onClick={(e) => {\n              if (curPageno + 1 > 0) {\n                dispatch(changeCurPage(parseInt(curPageno) + 1));\n              }\n            }}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              fill=\"currentColor\"\n              className=\"bi bi-arrow-right-circle-fill\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z\" />\n            </svg>{\" \"}\n          </button>\n          <span className=\"page-num\">\n            <input\n              type=\"text\"\n              value={curPageno}\n              className=\"pageviewer\"\n              onChange={handleChange}\n            />\n            <span className=\"border-0\">of 217</span>\n          </span>\n        </div>\n        <div className=\"col\">\n          <button\n            type=\"button\"\n            className=\"btn btn-light toolbar-btn px-2\"\n            title=\"Zoom-in\"\n            onClick={() => fnSetCurZoom(0.25)}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              fill=\"currentColor\"\n              className=\"bi bi-zoom-in\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"\n              />\n              <path d=\"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z\" />\n              <path\n                fillRule=\"evenodd\"\n                d=\"M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z\"\n              />\n            </svg>\n          </button>\n\n          <span className=\"border-start border-2 h-100 rounded-pill\"></span>\n\n          <button\n            type=\"button\"\n            className=\"btn btn-light toolbar-btn px-2\"\n            title=\"Zoom-out\"\n            onClick={() => fnSetCurZoom(-0.25)}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              fill=\"currentColor\"\n              className=\"bi bi-zoom-out\"\n              viewBox=\"0 0 16 16\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"\n              />\n              <path d=\"M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z\" />\n              <path\n                fillRule=\"evenodd\"\n                d=\"M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ToolBar;\n","import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport { Stage, Layer, Image } from \"react-konva\";\nimport useImage from \"use-image\";\nimport PageImageInfo from \"../types\";\n\n// custom component that will handle loading image from url\n// you may add more logic here to handle \"loading\" state\n// or if loading is failed\n// VERY IMPORTANT NOTES:\n// at first we will set image state to null\n// and then we will set it to native image instance when it is loaded\n\n\nexport interface Props {\n\tpageImage: PageImage | null;\n\n}\n\n/* interface State {\n\timage: null;\n} */\n\nclass ImageView extends React.Component<Props, State> {\n\t/* state: State = {\n\t\timage: null,\n\t}; */\n\timage = null;\n\t\n\tcomponentDidUpdate(oldProps) {\n\t\tif (\n\t\t\toldProps.pageImage?.urlObject !==\n\t\t\tthis.props.pageImage?.urlObject\n\t\t) {\n\t\t\tthis.loadImage();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.image?.removeEventListener(\"load\", this.handleLoad);\n\t}\n\n\tloadImage() {\n\t\t// save to \"this\" to remove \"load\" handler on unmount\n\t\tthis.image = new window.Image();\n\t\tthis.image.src = this.props.pageImage?.urlObject;\n\t}\n\n\t/* handleLoad = () => {\n\t\t// after setState react-konva will update canvas and redraw the layer\n\t\t// because \"image\" property is changed\n\t\tthis.setState({\n\t\t\timage: this.image,\n\t\t});\n\t\t// if you keep same image object during source updates\n\t\t// you will have to update layer manually:\n\t\t// this.imageNode.getLayer().batchDraw();\n\t}; */\n\t\n\trender() {\n\t\treturn (\n\t\t\t<Image\n\t\t\t\timage={this.image}\n\t\t\t\tref={(node) => {\n\t\t\t\t\tthis.imageNode = node;\n\t\t\t\t}}\n\t\t\t\twidth={this.props.width}\n\t\t\t\theight={this.props.height}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImageView;\n","export default __webpack_public_path__ + \"static/media/Spin.a5530faa.svg\";","import { EditorState } from \"prosemirror-state\";\r\nimport { EditorView } from \"prosemirror-view\";\r\nimport { Schema, DOMParser } from \"prosemirror-model\";\r\nimport { schema } from \"prosemirror-schema-basic\";\r\nimport { addListNodes } from \"prosemirror-schema-list\";\r\nimport { exampleSetup } from \"prosemirror-example-setup\";\r\nimport Page from \"../../types\";\r\nimport \"./HocrView.css\";\r\nimport { Dispatch, useEffect, useState } from \"react\";\r\nimport Loader from \"../Loading animation/Spin.svg\";\r\n// import { setHoverId } from \"../../reducer/actions\";\r\n// import ReactQuill from \"react-quill\";\r\n// import \"react-quill/dist/quill.snow.css\";\r\n// import { renderToString } from \"react-dom/server\";\r\n\r\nexport interface Props {\r\n  page: Page | null;\r\n  width: int;\r\n  height: int;\r\n  hoverId: string;\r\n  dispatch: Dispatch<AppReducerAction>;\r\n  editorValue: string;\r\n}\r\n\r\nfunction HocrView({\r\n  page,\r\n  hoverId,\r\n  dispatch,\r\n  editorValue,\r\n  setEditorValue,\r\n}: Props) {\r\n  const [isPageLoaded, setIsPageLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (page) {\r\n      setIsPageLoaded(true);\r\n      const mySchema = new Schema({\r\n        nodes: addListNodes(schema.spec.nodes, \"paragraph block*\", \"block\"),\r\n        marks: schema.spec.marks,\r\n      });\r\n      window.view = new EditorView(document.querySelector(\"#editor\"), {\r\n        state: EditorState.create({\r\n          doc: DOMParser.fromSchema(mySchema).parse(page),\r\n          plugins: exampleSetup({ schema: mySchema }),\r\n        }),\r\n      });\r\n\r\n      setEditorValue(\r\n        document\r\n          .querySelector(\"#editor\")\r\n          ?.innerText.split(\"Insert\\nType...\\nâ¬š\\n\\n\")[1]\r\n      );\r\n    }\r\n  }, [page]);\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        id=\"editor\"\r\n        className={isPageLoaded ? \"appear\" : \"\"}\r\n        onKeyUp={(event) => {\r\n          setEditorValue(event.target.innerText);\r\n        }}\r\n      ></div>\r\n      <div className=\"loadingAnimation\">\r\n        {!isPageLoaded && <img src={Loader} alt=\"\" />}\r\n      </div>\r\n      {/* <ReactQuill value={editorValue} onChange={valueAdded} /> */}\r\n      {/* <p>{linesEl}</p> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HocrView;\r\n","import ToolBar from \"./ToolBar\";\nimport { Stage, Layer, Text, Line } from \"react-konva\";\nimport { useMeasure } from \"react-use\";\nimport React, { useState, useEffect } from \"react\";\nimport ImageView from \"./ImageView\";\nimport { useAppReducer } from \"../../reducerContext\";\nimport { Link } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { loadImageUtil } from \"../../utils\";\nimport {\n  Button,\n  ButtonGroup,\n  Nav,\n  Navbar,\n  NavDropdown,\n  Container,\n} from \"react-bootstrap\";\nimport {\n  loadImage,\n  loadHocr,\n  logInfo,\n  changeCurPage,\n} from \"../../reducer/actions\";\nimport doOcr, { parsePage } from \"../../lib/doOcr\";\nimport HocrLayer from \"./components/HocrLayer\";\nimport HocrView from \"./HocrView\";\nimport axios from \"axios\";\nimport \"./PageView.css\";\nimport DropDown from \"./components/DropDown\";\nimport Loader from \"../Loading animation/Spin.svg\";\n\nfunction PageViewer() {\n  const [state, dispatch] = useAppReducer();\n  const [editorValue, setEditorValue] = useState();\n  const parsed = queryString.parse(window.location.search);\n  const [curZoom, setCurZoom] = useState(1);\n  const [bookDetails, setBookDetails] = useState(null);\n  const [imageLoading, setImageLoading] = useState(false);\n  const handleZoom = (zoomDelta: int) => {\n    setCurZoom(curZoom + zoomDelta);\n  };\n\n  const [imgMeasureRef, { width, height }] = useMeasure();\n\n  useEffect(() => {\n    setImageLoading(state.pageImage == null);\n  }, [state.pageImage]);\n\n  useEffect(() => {\n    if (!parsed?.p) {\n      parsed.p = \"1\";\n    }\n    if (parsed?.b) {\n      axios\n        .get(process.env.REACT_APP_SERVER_URL + \"/books/\" + parsed.b)\n        .then((response) => setBookDetails(response.data));\n    }\n\n    dispatch(changeCurPage(parseInt(parsed.p)));\n    //uu10.129.6.78:5000/h/b/1/p/2\n    /* const imageurl =\n\t\t\tREACT_APP_SERVER_URL +\n\t\t\t\"/i/b/\" +\n\t\t\tparsed?.b +\n\t\t\t\"/p/\" +\n\t\t\tparsed?.p; */\n\n    //\tif (!state.pageImage) {\n    //\t}\n  }, []);\n\n  const FileOptions = [\n    {\n      key: 1,\n      value: \"New File\",\n    },\n    {\n      key: 2,\n      value: \"Save File\",\n    },\n  ];\n\n  const EditOptions = [\n    {\n      key: 3,\n      value: \"Undo\",\n    },\n    {\n      key: 4,\n      value: \"Redo\",\n    },\n  ];\n\n  const LangOptions = [\n    {\n      key: 5,\n      value: \"English\",\n    },\n    {\n      key: 6,\n      value: \"Hindi\",\n    },\n  ];\n  /* const baseURL = \"http://localhost:3000/user/saveCall\"; */\n  const baseURL =\n    \"https://addc4874-2a04-4b13-b532-00430ba4e487.mock.pstmn.io/user/putCall\";\n\n  const apiCall = (dat: int) => {\n    console.log(dat);\n    axios\n      .put(baseURL, {\n        id: dat,\n        name: \"This is an updated post.\",\n      })\n      .then((response) => {\n        console.log(response.data);\n        alert(\"Working\");\n      });\n  };\n  const onClickSaveFile = () => {\n    console.log(editorValue);\n\n    const postEditedTextURL =\n      process.env.REACT_APP_SERVER_URL + \"/ocr-editor-text\";\n    axios\n      .post(postEditedTextURL, { text: editorValue })\n      .then((response) => {})\n      .catch((error) => {});\n  };\n\n  return (\n    <>\n      <div className=\"background\">\n        <div className=\"container-fluid py-0\">\n          {/* <Link\n\t\t\t\t\t\tclassName=\"navbar-brand\"\n\t\t\t\t\t\tto=\"/cli\"> */}\n          {/* <span className=\"px-2\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\twidth=\"42\"\n\t\t\t\t\t\t\t\theight=\"42\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tclassName=\"bi bi-arrow-left-circle\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span> */}\n          <div className=\"head\">\n            <nav\n              className=\"navbar navbar-dark navbar-expand-md shadow-sm p-0 m-0\"\n              style={{ backgroundColor: \"#1b1b53\", paddingRight: \"0\" }}\n            >\n              <div className=\"container-fluid py-0 d-flex justify-content-spacebetween\">\n                <Link className=\"navbar-brand\" to=\"/cli\">\n                  SandHI\n                </Link>\n                <div>\n                  <button className=\"saveButton\" onClick={onClickSaveFile}>save file</button>\n                </div>\n              </div>\n            </nav>\n          </div>\n\n          <div className=\"format-options-background\">\n            {/*<ButtonGroup aria-label=\"Basic example\">\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Resize Image</Button>\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Mark Regions</Button>\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Comments Accuracy</Button>\n\t\t\t\t\t\t\t\t<Button className=\"button\" variant=\"secondary\">Compare Character Output</Button>\t\t\n\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t</div> */}\n\n            {/* <button className=\"text-format-option icon2\">Mark Regions</button> */}\n          </div>\n        </div>\n        {/* </Link> */}\n        {/* <span className=\"navbar-text px-3 me-auto\">\n\t\t\t\t\t\t{bookDetails?.title}\n\t\t\t\t\t</span> */}\n        <div className=\"container-fluid pv-container pt-2 pb-4 px-2\">\n          <div className=\"row wh-90 vh-100 border shadow\">\n            <div className=\"col-md-6 shadow\" ref={imgMeasureRef}>\n              <div className=\"p-3 border pv-pane\">\n                <div className=\"loadingAnimation\">\n                  {imageLoading && <img src={Loader} alt=\"\" />}\n                </div>\n                <Stage\n                  width={\n                    (state.pageImage?.curWidth !== 0\n                      ? state.pageImage?.curWidth\n                      : width) * curZoom\n                  }\n                  height={\n                    (state.pageImage?.curHeight !== 0\n                      ? state.pageImage?.curHeight\n                      : height) * curZoom\n                  }\n                >\n                  {!state.pageImage && (\n                    <Layer>\n                      <Text text={state.pageImage?.urlObject} />\n                    </Layer>\n                  )}\n\n                  <Layer>\n                    <ImageView\n                      pageImage={state.pageImage}\n                      width={\n                        (state.pageImage?.curWidth !== 0\n                          ? state.pageImage?.curWidth\n                          : width) * curZoom\n                      }\n                      height={\n                        (state.pageImage?.curHeight !== 0\n                          ? state.pageImage?.curHeight\n                          : height) * curZoom\n                      }\n                    />\n                  </Layer>\n                  {/* <HocrLayer\n                    page={state.hocrPage}\n                    dispatch={dispatch}\n                    pageImage={state.pageImage}\n                    width={\n                      (state.pageImage?.curWidth !== 0\n                        ? state.pageImage?.curWidth\n                        : width) * curZoom\n                    }\n                    height={  \n                      (state.pageImage?.curHeight !== 0\n                        ? state.pageImage?.curHeight\n                        : height) * curZoom\n                    }\n                    hoverId={state.hoverId}\n                  /> */}\n                </Stage>\n              </div>\n            </div>\n            <div className=\"col-md-6 shadow\">\n              <div className=\"p-3 border pv-pane\">\n                <HocrView\n                  editorValue={editorValue}\n                  setEditorValue={setEditorValue}\n                  page={state.hocrPage}\n                  hoverId={state.hoverId}\n                  dispatch={dispatch}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"row fixed-bottom\">\n            <ToolBar\n              curPageno={state.curPageno}\n              dispatch={dispatch}\n              fnSetCurZoom={handleZoom}\n            />\n            <div className=\"col-md-6 offset-md-4 px-3\">{state.logInfo}</div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default PageViewer;\n","import Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Form from \"react-bootstrap/Form\";\nimport Alert from \"react-bootstrap/Alert\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nfunction BooksCatalog() {\n  const [show, setShow] = useState(false);\n  const [showAlert, setShowAlert] = useState(false);\n\n  const [inputValues, setInputValues] = useState({});\n  const [onlineBookList, setOnlineBookList] = useState([]);\n  const [alertMessage, setAlertMessage] = useState({});\n\n  const form = useRef(null);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const refreshBookList = () => {\n    const listBookUrl = process.env.REACT_APP_SERVER_URL + \"/books\";\n    axios\n      .get(listBookUrl)\n      .then((response) => {\n        setOnlineBookList(response.data.data);\n      })\n      .catch((er) => {\n        setAlertMessage({\n          msg: er.response.data,\n          variant: \"danger\",\n        });\n        setShowAlert(true);\n      });\n  };\n\n  useEffect(() => {\n    refreshBookList();\n  }, []);\n  const booksList = [\n    {\n      _id: { $oid: \"60e72548f67de168a975542a\" },\n      title: \"Sukra Neeti Sara\",\n      author: \"A Author\",\n      fullpath: \"/path/to/book/pdf\",\n    },\n    {\n      _id: { $oid: \"60e2cd9237ca51041bc241de\" },\n      title: \"Sukra Neeti Sara\",\n      author: \"A Author\",\n      fullpath: \"/path/to/book/pdf\",\n    },\n    {\n      _id: { $oid: \"60e2cf76b7873293bb9ba1ed\" },\n      title: \"Vara 68\",\n      author: \"A Author\",\n      fullpath: \"/path/to/pdf\",\n    },\n    {\n      _id: { $oid: \"60e2d0b5b7873293bb9ba1ee\" },\n      title: \"Vara 68 and 86\",\n      author: \"A Author\",\n      fullpath: \"/path/to/pdf\",\n    },\n  ];\n\n  const trItem = onlineBookList.map((bookItem, index) => (\n    <tr key={bookItem.repo_name}>\n      <th>{index + 1}</th>\n      <td>{bookItem.title}</td>\n      <td>{bookItem.author}</td>\n      <td>{bookItem.category}</td>\n      <td>\n        <Link to={\"/cli/pageview?b=\" + bookItem.repo_name}>View Book</Link>\n      </td>\n    </tr>\n  ));\n\n  const handleInputChange = (event) => {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n    const name = target.id;\n    let shallow = Object.assign({}, inputValues);\n    shallow[name] = value;\n    setInputValues(shallow);\n  };\n\n  const handleBookSubmit = (e) => {\n    e.preventDefault();\n    const frmData = new FormData(form.current);\n    const addBookUrl = process.env.REACT_APP_SERVER_URL + \"/books\";\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\",\n      },\n    };\n    axios\n      .post(addBookUrl, frmData, config)\n      .then((response) => {\n        //console.log(response);\n        setAlertMessage({\n          msg: \"Successfully saved the book to the SandHI catalog\",\n          variant: \"success\",\n        });\n        setShowAlert(true);\n        refreshBookList();\n      })\n      .catch((er) => {\n        setAlertMessage({\n          msg: er.response?.data,\n          variant: \"danger\",\n        });\n        setShowAlert(true);\n      });\n  };\n\n  return (\n    <>\n      <Modal show={show} onHide={handleClose} animation={false}>\n        <Modal.Header>\n          <Modal.Title>\n            Add a book to SandHI catalog using this form\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form ref={form} onSubmit={handleBookSubmit}>\n            <Form.Group>\n              <Form.Label>Book Title</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter Book Title\"\n                onChange={handleInputChange}\n                id=\"title\"\n                name=\"title\"\n              />\n            </Form.Group>\n            <Form.Group>\n              <Form.Label>Author of the book</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter name of the Author\"\n                onChange={handleInputChange}\n                id=\"author\"\n                name=\"author\"\n              />\n            </Form.Group>\n            <Form.Group>\n              <Form.Label>Category</Form.Label>\n              <Form.Control as=\"select\" id=\"category\" name=\"category\">\n                <option value=\"general\">General</option>\n                <option value=\"ganitha\">Ganitha</option>\n                <option value=\"philosophy\">Philosophy</option>\n                <option value=\"article\">Article</option>\n              </Form.Control>\n            </Form.Group>\n            <Form.Group>\n              <Form.Label>Number of pages</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Number of pages\"\n                id=\"noofpages\"\n                name=\"noofpages\"\n              />\n            </Form.Group>\n            <Form.Group>\n              <Form.Label>Pdf File of the book</Form.Label>\n\n              <Form.File id=\"uploaded_file\" name=\"uploaded_file\" />\n            </Form.Group>\n            <br />\n            <Button variant=\"primary\" type=\"submit\">\n              Submit\n            </Button>\n            <Alert\n              // variant=\"danger\"\n              onClose={() => setShowAlert(false)}\n              dismissible\n              show={showAlert}\n              variant={alertMessage?.variant}\n            >\n              {alertMessage?.msg}\n            </Alert>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            Close\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col\">\n            <table className=\"table table-striped\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">#</th>\n                  <th scope=\"col\">Title</th>\n                  <th scope=\"col\">Author</th>\n                  <th scope=\"col\">Category</th>\n                  <th scope=\"col\">Link to the book</th>\n                </tr>\n              </thead>\n              <tbody style={{ color: \"#1b1b53\" }}>\n                <tr>\n                  <td colSpan={5}>\n                    <Link to=\"/cli/search\"> Search the Catalog</Link>\n                  </td>\n                </tr>\n\n                {trItem}\n                <tr>\n                  <td colSpan={5}>\n                    <Button variant=\"link\" onClick={handleShow}>\n                      Add a book to the Catalog\n                    </Button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\nexport default BooksCatalog;\n","import \"./SearchPage.css\";\nimport { Link } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport Alert from \"react-bootstrap/Alert\";\nimport axios from \"axios\";\n\nexport default function SearchPage() {\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\tconst [alertMessage, setAlertMessage] = useState({});\n\tconst [showAlert, setShowAlert] = useState(false);\n\tconst [searchResults, setSearchResults] = useState({});\n\n\tconst searchResultsDiv = searchResults?.response?.docs.map(\n\t\t(bookItem, index) => (\n\t\t\t<div\n\t\t\t\tclassName=\"card col-12 col-md-9 border-0 pt-4\"\n\t\t\t\tkey={bookItem.id}\n\t\t\t>\n\t\t\t\t<Link\n\t\t\t\t\tto={\n\t\t\t\t\t\t\"/cli/pageview?b=\" +\n\t\t\t\t\t\tbookItem.bookuuid +\n\t\t\t\t\t\t\"&p=\" +\n\t\t\t\t\t\tbookItem.pageno\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"card-link stretched-link\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t>\n\t\t\t\t\t{process.env.REACT_APP_SERVER_URL +\n\t\t\t\t\t\t\"/cli/pageview?b=\" +\n\t\t\t\t\t\tbookItem.bookuuid +\n\t\t\t\t\t\t\"&p=\" +\n\t\t\t\t\t\tbookItem.pageno}\n\t\t\t\t</Link>\n\t\t\t\t<div className=\"card-title pt-2 inline-headers\">\n\t\t\t\t\t<h5>{bookItem?.title}</h5>\n\t\t\t\t\t<span className=\"badge bg-light text-dark rounded-pill\">\n\t\t\t\t\t\t{\"Page \" + bookItem.pageno}\n\t\t\t\t\t</span>\n\t\t\t\t\t<h6 className=\"card-subtitle mb-2 text-muted\">\n\t\t\t\t\t\t{bookItem.author}\n\t\t\t\t\t</h6>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"card-body p-0 m-0 text-muted d-inline-block text-truncate\"\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: searchResults[\n\t\t\t\t\t\t\t\"highlighting\"\n\t\t\t\t\t\t][bookItem.id]?.pagecontent[0],\n\t\t\t\t\t}}\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t)\n\t);\n\n\tconst refreshSearchResults = async (qvalue) => {\n\t\tconst queryURL =\n\t\t\tprocess.env.REACT_APP_SERVER_URL + \"/s/\" + qvalue;\n\t\tawait axios\n\t\t\t.get(queryURL)\n\t\t\t.then((response) => {\n\t\t\t\tsetSearchResults(response.data);\n\t\t\t})\n\t\t\t.catch((er) => {\n\t\t\t\tif (er.response) {\n\t\t\t\t\tsetAlertMessage({\n\t\t\t\t\t\tmsg: er.response?.data,\n\t\t\t\t\t\tvariant: \"danger\",\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsetAlertMessage({\n\t\t\t\t\t\tmsg: \"Unkown errro in server\",\n\t\t\t\t\t\tvariant: \"danger\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetShowAlert(true);\n\t\t\t});\n\t};\n\n\tconst handleInputChange = (event) => {\n\t\tif (event.key === \"Enter\") {\n\t\t\trefreshSearchResults(event.target.value);\n\t\t\tconsole.log(searchResultsDiv);\n\t\t\treturn;\n\t\t} else {\n\t\t\tsetSearchQuery(event.target.value);\n\t\t}\n\t};\n\treturn (\n\t\t<>\n\t\t\t<div className=\"container-fluid px-5 pt-5\">\n\t\t\t\t<div className=\"row align-items-center shadow p-2\">\n\t\t\t\t\t<Link to=\"/cli\">back to Catalog</Link>\n\t\t\t\t\t<div className=\"col-12 col-md-4 col-lg-2\">\n\t\t\t\t\t\t<p className=\"h1\">Sandhi</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-12 col-md-8 col-lg-8\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\t\t\tid=\"exampleFormControlInput1\"\n\t\t\t\t\t\t\tplaceholder=\"enter your search string\"\n\t\t\t\t\t\t\tonKeyDown={\n\t\t\t\t\t\t\t\thandleInputChange\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Alert\n\t\t\t\t\t\tvariant=\"danger\"\n\t\t\t\t\t\tonClose={() =>\n\t\t\t\t\t\t\tsetShowAlert(false)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdismissible\n\t\t\t\t\t\tshow={showAlert}\n\t\t\t\t\t\tvariant={alertMessage?.variant}\n\t\t\t\t\t>\n\t\t\t\t\t\t{alertMessage?.msg}\n\t\t\t\t\t</Alert>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"container-fluid p-0 m-0\">\n\t\t\t\t<hr />\n\t\t\t</div>\n\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"col-12 col-md-4\"\n\t\t\t\t\t\tshow={searchResults?.response}\n\t\t\t\t\t>\n\t\t\t\t\t\t<h6 className=\"text-muted\">\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchResults\n\t\t\t\t\t\t\t\t\t?.response\n\t\t\t\t\t\t\t\t\t?.numFound\n\t\t\t\t\t\t\t}{\" \"}\n\t\t\t\t\t\t\tresults in {searchResults?.responseHeader?.QTime+\" \"}\n\t\t\t\t\t\t\tmilliseconds\n\t\t\t\t\t\t</h6>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row border shadow-lg pb-4\">\n\t\t\t\t\t{searchResultsDiv}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport { useEffect, useState } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { useAppReducer } from \"./reducerContext\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport PageViewer from \"./components/PageView/PageView\";\nimport BooksCatalog from \"./components/BooksCatalog\";\nimport SearchPage from \"./components/SearchPage\";\n\nfunction App() {\n\tconst [state, dispatch] = useAppReducer();\n\tconst location = window.location.href;\n\n\tlet params = location.split(\"?\");\n\tlet bookid = \"\";\n\tif (params.length > 1) {\n\t\tbookid = location.split(\"?\")[1].split(\"&\")[0];\n\t}\n\n\tconst styleCSS = {\n\t\tbackgroundColor: '#1b1b53'\n\t}\n\n\treturn (\n\t\t<Router>\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/cli/search\">\n\t\t\t\t\t<SearchPage />\n\t\t\t\t</Route>\n\n\t\t\t\t<Route exact path=\"/cli\">\n\t\t\t\t\t<nav className=\"navbar navbar-dark navbar-expand-md shadow-sm p-0 m-0\" style={styleCSS}>\n\t\t\t\t\t\t<div className=\"container-fluid py-0\">\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tclassName=\"navbar-brand\"\n\t\t\t\t\t\t\t\tto=\"/cli\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSandHI\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<span className=\"navbar-text px-3 me-auto\">\n\t\t\t\t\t\t\t\tBooks Catalog\n\t\t\t\t\t\t\t\tList\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</nav>\n\n\t\t\t\t\t<BooksCatalog />\n\t\t\t\t</Route>\n\t\t\t\t<Route exact path=\"/cli/pageview\">\n\t\t\t\t\t<PageViewer />\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</Router>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { AppReducerProvider } from \"./reducerContext\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<AppReducerProvider>\n\t\t\t<App />\n\t\t</AppReducerProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}